<div class="auth-section-header">
    <h3>Zarejestruj się!</h3>
    <p>Potrzebujemy od Ciebie kilku informacji, abyś mógł korzystać z wierży w swoim otoczeniu</p>
</div>

<div class="auth-form-container">
    <form [formGroup]="signUpForm">
      <div class="field-container">
        <mat-form-field>
          <mat-label>Nazwa użytkownika</mat-label>
          <input
            matInput
            formControlName="userName"
            required>
            @if (userNameControl.errors?.['required']) {
              <mat-error><span class="material-symbols-outlined">error</span>Pole jest wymagane</mat-error>
            } @else if (userNameControl.errors?.['minLength']) {
              <mat-error><span class="material-symbols-outlined">error</span>Hasło musi mieć minimum 8 znaków</mat-error>
            }
        </mat-form-field>
      </div>
      <div class="field-container">
        <mat-form-field>
          <mat-label>Hasło</mat-label>
          <input matInput  formControlName="password" required [type]="hidePassword ? 'password' : 'text'">
          <mat-icon matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          @if (passwordControl.errors?.['required']) {
            <mat-error><span class="material-symbols-outlined">error</span>Pole jest wymagane</mat-error>
          } @else if (passwordControl.errors?.['minlength']) {
            <mat-error><span class="material-symbols-outlined">error</span>Wymagane jest przynajmniej 8 znaków</mat-error>
          }
        </mat-form-field>
      </div>
      <div class="field-container">
        <mat-form-field>
          <mat-label>Powtórz hasło</mat-label>
          <input matInput  formControlName="confirmPassword" [type]="hideConfirmPassword ? 'password' : 'text'" required>
          <mat-icon matSuffix (click)="hideConfirmPassword = !hideConfirmPassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideConfirmPassword">{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          @if (signUpForm.errors?.['notSame']) {
            <mat-error><span class="material-symbols-outlined">error</span>Hasła muszą być takie same</mat-error>
          }
        </mat-form-field>
      </div>
      <div class="field-container">
        <mat-form-field>
          <mat-label>Pytanie pomocnicze</mat-label>
          <mat-select formControlName="auxiliaryQuestion" required>
            <mat-option value="1">First option</mat-option>
            <mat-option value="2">Second option</mat-option>
            <mat-option value="3">Second option</mat-option>
            <mat-option value="4">Second option</mat-option>
            <mat-option value="5">Second option</mat-option>
            <mat-option value="6">Second option</mat-option>
            <mat-option value="7">Second option</mat-option>
          </mat-select>
            @if (auxiliaryQuestion.errors?.['required']) {
              <mat-error><span class="material-symbols-outlined">error</span>Pole jest wymagane</mat-error>
            }
        </mat-form-field>
      </div>
      <div class="field-container">
        <mat-form-field>
          <mat-label>Odpowiedź na pytanie pomocnicze</mat-label>
          <input
            matInput
            formControlName="auxiliaryAnswer"
            required>
            @if (auxiliaryAnswer.errors?.['required']) {
              <mat-error><span class="material-symbols-outlined">error</span>Pole jest wymagane</mat-error>
            }
        </mat-form-field>
      </div>
    </form>
    <div class="spacer-4"></div>
    <button (click)="signUp()" [disabled]="signUpForm.invalid || loadingButton" class="at-button normal flat-green iconic auth-button">
      <mat-spinner *ngIf="loadingButton" [strokeWidth]="3" [diameter]="20"></mat-spinner>
      <span class="material-symbols-outlined">login</span>
      <span>Zarejestruj się</span>
    </button>
    <div class="spacer-3"></div>
    <p class="auth-botton-text">Masz już konto? <span (click)="goToSignIn()">Zaloguj się</span></p>

  </div>