@if (loading) {
    <at-loading [blur]="true"></at-loading>
} @else {
    <div class="base-custom-box">
      <div class="base-content">
        <div class="settings-container animate__animated animate__fadeInUp">
          <mat-accordion class="example-headers-align" multi>
            <mat-expansion-panel class="setting-expansion-panel">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <span class="material-symbols-outlined">
                    person
                    </span>
                  Account details
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div class="panel-container">
                <div class="account-details-content">
                  <div class="left-content">
                    <p class="settings-subtitle">User avatar</p>
                    <div class="avatar-container">
                      <at-avatar
                      [size]="150"
                      [hover]="true"
                      [sourceName]="username!"
                      class="flex-row justify-center"></at-avatar>
                    </div>
                  </div>
                  <div class="right-content">
                    <p class="settings-subtitle">User information</p>
                      <div class="account-details-element">
                        <span class="material-symbols-outlined">person</span>
                        <span>{{username}}</span>
                      </div>
                      <div class="account-details-element">
                        <span class="material-symbols-outlined">border_color</span>
                        <span (click)="openEditAuthDialog()" class="change-password-link">Change remind question and answer</span>
                      </div>
                      <div class="account-details-element">
                        <span class="material-symbols-outlined">lock</span>
                        <span (click)="openChangePasswordDialog()" class="change-password-link">Change password</span>
                      </div>
                  </div>
                </div>
              </div>
            </mat-expansion-panel>
  
            <mat-expansion-panel class="setting-expansion-panel">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <span class="material-symbols-outlined">
                    widgets
                    </span>
                  Application preferences
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div class="panel-container">
                <div class="app-preferences-content">
                  <div class="app-pref-element">
                    <div>
                      <span class="material-symbols-outlined">conversion_path</span>
                      <span>Application version: </span>
                    </div>
                    <div>
                      <span>{{appVersion}}</span>
                    </div>
                  </div>
                  <div class="app-pref-element">
                    <div>
                      <span class="material-symbols-outlined">terminal</span>
                      <span>Java version: </span>
                    </div>
                    <div>
                      <span>{{javaVersion}}</span>
                    </div>
                  </div>
                  <div class="app-pref-element">
                    <div>
                      <span class="material-symbols-outlined">terminal</span>
                      <span>Angular version: </span>
                    </div>
                    <div>
                      <span>{{angularVersion}}</span>
                    </div>
                  </div>
                  <div class="app-pref-element">
                    <div>
                      <span class="material-symbols-outlined">dark_mode</span>
                      <span>Dark mode</span>
                    </div>
                    <div>
                      <form [formGroup]="themeForm">
                        <mat-slide-toggle (change)="toggleTheme()" formControlName="theme" color="primary"></mat-slide-toggle>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </mat-expansion-panel>
  
            <mat-expansion-panel class="setting-expansion-panel">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <span class="material-symbols-outlined">
                    diversity_1
                    </span>
                  License
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div class="panel-container">
                <div class="authors-content">
                  <div class="authors-element">
                    <div>
                      <span class="material-symbols-outlined">license</span>
                      <span>Aura Tower is open-source software licensed under the MIT License. You are free to use, modify, and distribute this software as long as you comply with the license terms.</span>
                    </div>
                  </div>
                </div>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
        <div class="spacer-4"></div>
        <div class="buttons-container buttons-small-space justify-center animate__animated animate__fadeIn animate__delay-1s">
          <button
          class="at-button normal iconic outline-green"
          mat-button
          (click)="goToHeadquarters()">
            <span class="material-symbols-outlined">arrow_back</span>
            <span>Back</span>
          </button>
        </div>
      </div>
    </div>
}